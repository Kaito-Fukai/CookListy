<%= render 'layouts/header' %>
<div class="container">
	<div class="row">
		<!-- 左サイドバー -->
		<div class="accordion accordion-border col-lg-2">
			<h4 style="">タグ絞り込み</h4>
			<% @tags.each do |t| %>
				<ul id="accordion mdl-list">
					<li class="accordion-item mdl-list__item">
				    	<p class="question", style="float: left;"><%= t.category %></p>
				    	<span>▶</span><br>
				     	<div class="answer">
				        	<p>	<%# link_to recipes_search_path(:q => "豚") do %>
				        		<% Tag.where(category: t.category).each do |w| %>
				        				<%= search_form_for @q, :url => recipes_search_path do |f| %>
											<%= f.search_field :recipe_name_cont, value: w.word, style: 'display: none;' %>
												<%= button_tag :type => 'submit', :class => 'search-tag label' do %>
										<%#= link_to w.word, recipes_search_path, %>
													<%= w.word %>
												<% end %>
										<% end %>

								<% end %></p>
				     	</div>
					</li>
				</ul>
			<% end %>
		</div>

		<!-- 中央コンテンツ -->
		<div class="col-lg-10">
			<h3>既存レシピ一覧</h3>
			<%= render 'layouts/recipes_index', recipes: @recipes %>
		</div>
	</div>
</div>
<%= render 'layouts/footer'%>


<script>
$(function() {
  $('.accordion-item').click(function(){

    //出隠れする部分を変数に格納しておく
    var $answer = $(this).children('.answer');

    //hasClassメソッドで出隠れする部分にopenが存在するか確認
    if ($answer.hasClass('open')) {

      //出隠れ部分が出ている場合の処理

      //&ltdiv class="answer open"&gtからopenを消す
      $answer.removeClass('open');

      //出ている部分をスライドアップして隠す
      $answer.slideUp();

      //横っちょにある開閉ボタンを+に変える
      $(this).children('span').text('▶');
    } else {

      //出隠れ部分が隠れている場合の処理

      //&ltdiv class="answer"&gtにopenを追加する
      $answer.addClass('open');

      //出す部分をスライドダウンして表示させる
      $answer.slideDown();

      //横っちょにある開閉ボタンを-に変える
      $(this).children('span').text('▼');
    }
  });
});
</script>